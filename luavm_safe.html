<!DOCTYPE html>
<html lang="en">
<body>
 
<!-- begin script tag example -->
<script src="parse_func.js"></script>
<script src="lua_safe.vm.js"></script>

<table>
<tr><td>
<h3>Edit Lua script here:</h3>
<textarea id="luaCode" width="400" height="300" style="width:400px;height:300px;">
    js.run('run()');
    js.run('alert("food\nmore")');

    a = js.run('sum(1,2,3)');
    print('a='..a)
    js.run('concat(1,"+",3)');
    b = math.sin(30 / 180 * 3.14)
    print(b)
</textarea>
</td>

<td>
<h3>Define JavaScript callback functions</h3>

<textarea id="javascriptCode" width="400" height="300" style="width:400px;height:300px;">
window.luaCallback = {
  'run':function() {
    console.log('running')
  },
  alert:function(message) {
    alert(message);
  },
  sum:function(a,b,c) {
    s = a+b+c;
    console.log('sum result: ' + s);
    return s;
  },
    concat:function(a,b,c) {
    s = ''+a+b+c;
    console.log('concat result: ' + s);
  }

}
</textarea>
</td>
</tr>
</table>

<p>

<button onclick="runLua();">Run Lua</button>

    <script type="text/javascript">

    function runLua() {
      eval(document.getElementById('javascriptCode').value);
      var code = document.getElementById('luaCode').value;
      Lua.execute(code);
    }
    </script>
  </body>
</html>

