<!DOCTYPE html>
<html lang="en">
<body>
 
<!-- begin script tag example -->
<script src="parse_func.js"></script>
<script src="lua_safe.vm.js"></script>

    <textarea id="luaCode" width="800" height="200" style="width:800px;height:200px;">
        js.run('run()');
        js.run('alert("food\nmore")');
    
        a = js.run('sum(1,2,3)');
        print('a='..a)
        js.run('concat(1,"+",3)');
        b = math.sin(30 / 180 * 3.14)
        print(b)
    </textarea>
    <button onclick="runLua();">run lua</button>

<script type="lua">
    alert('hi');
</script>

    <script type="text/javascript">
window.luaCallback = {
  'run':function() {
    console.log('running')
  },
  alert:function(message) {
    alert(message);
  },
  sum:function(a,b,c) {
    s = a+b+c;
    console.log('sum result: ' + s);
    return s;
  },
    concat:function(a,b,c) {
    s = ''+a+b+c;
    console.log('concat result: ' + s);
  }

}

    function runLua() {
      var code = document.getElementById('luaCode').value;
      Lua.execute(code);
    }
    </script>
  </body>
</html>

